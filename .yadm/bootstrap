#/usr/bin/env bash

sudo apt-get install curl

if [ -z ${XDG_CONFIG_HOME+x} ]; then
	XDG_CONFIG_HOME="~/.config"
fi

# setup fzf
if ! test -x $(which fzf); then
	git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
	~/.fzf/install --all
fi

# add ppas
PPA_VIM="jonathonf/vim"
PPA_FISH="fish-shell/release-3"

if ! grep -q "^deb .*${PPA_VIM}" /etc/apt/sources.list /etc/apt/sources.list.d/*; then
	sudo add-apt-repository "ppa:jonathonf/vim"
	sudo apt-get update
	sudo apt-get install -y vim
fi

if ! grep -q "^deb .*${PPA_FISH}" /etc/apt/sources.list /etc/apt/sources.list.d/*; then
	sudo apt-add-repository "ppa:fish-shell/release-3"
	sudo apt-get update
	sudo apt-get install -y fish
fi

# fish
if test -x $(which fish); then
	chsh -s "$(which fish)" $USER
	curl https://git.io/fisher --create-dirs -sLo $XDG_CONFIG_HOME/fish/functions/fisher.fish
	fish -c fisher
	fish -c "fisher add jethrokuan/fzf"
	fish -c "fisher add jethrokuan/z"
	fish -c "fisher add laughedelic/pisces"
fi

# vim
if test -x $(which vim); then
	sudo apt-get install -y python python-dev cmake
fi


# vim: ft=bash
